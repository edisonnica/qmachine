#-  Travis CI configuration file

#-  .travis.yml ~~
#
#   These instructions run QMachine's tests 11 times -- 2 versions of Node.js
#   against 5 databases each, plus Ruby against Mongo.
#
#                                                       ~~ (c) SRW, 15 Jul 2013
#                                                   ~~ last updated 29 Dec 2014

before_install:
  - npm install -g npm@latest
  - rvm use 'ruby-2.2.0' --install --binary --fuzzy

before_script:
  - psql -c "create database ${USER};" -U postgres
  - make $backend db=$db
  - sleep 5

env:
  global:
    - backend=node-app
  matrix:
    - db=couch
    - db=mongo
    - db=postgres
    - db=redis
    - db=sqlite

language: node_js

matrix:
  include:
    - node_js: '0.10'
      env: backend=ruby-app db=mongo

node_js:
  - '0.10'
  - '0.8'

script:
  - make check

services:
  - couchdb
  - mongodb
  - redis-server

sudo: false

#-  vim:set syntax=yaml:
